
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>4 자동차 수출입을 동시에 한다 &#8212; 파이썬을 활용한 무역데이터 분석</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/14 자동차 수출입을 동시에 한다';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5 수출 성장 분해하기" href="15%20%EC%88%98%EC%B6%9C%20%EC%84%B1%EC%9E%A5%20%EB%B6%84%ED%95%B4%ED%95%98%EA%B8%B0.html" />
    <link rel="prev" title="3 수출 다각화를 측정해보자" href="13%20%EC%88%98%EC%B6%9C%20%EB%8B%A4%EA%B0%81%ED%99%94%EB%A5%BC%20%EC%B8%A1%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="00%20%EC%84%9C%EB%AC%B8.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="파이썬을 활용한 무역데이터 분석 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="파이썬을 활용한 무역데이터 분석 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00%20%EC%84%9C%EB%AC%B8.html">
                    시작하며
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">데이터 분석</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="11%20%EC%9A%B0%EB%A6%AC%EB%82%98%EB%9D%BC%20%EB%AC%B4%EC%97%AD%EC%9D%98%EC%A1%B4%EB%8F%84%20%EC%B6%94%EC%9D%B4.html">1 우리나라 무역의존도 추이</a></li>
<li class="toctree-l1"><a class="reference internal" href="12%20%EC%88%98%EC%B6%9C%EC%9D%98%20%EB%82%B4%EC%9A%A9%EC%9D%84%20%EB%94%B0%EC%A0%B8%EB%B3%B4%EC%9E%90.html">2 수출의 내용을 따져보자</a></li>
<li class="toctree-l1"><a class="reference internal" href="13%20%EC%88%98%EC%B6%9C%20%EB%8B%A4%EA%B0%81%ED%99%94%EB%A5%BC%20%EC%B8%A1%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90.html">3 수출 다각화를 측정해보자</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4 자동차 수출입을 동시에 한다</a></li>
<li class="toctree-l1"><a class="reference internal" href="15%20%EC%88%98%EC%B6%9C%20%EC%84%B1%EC%9E%A5%20%EB%B6%84%ED%95%B4%ED%95%98%EA%B8%B0.html">5 수출 성장 분해하기</a></li>
<li class="toctree-l1"><a class="reference internal" href="16%20%EC%96%B4%EB%96%A4%20%EB%82%98%EB%9D%BC%EA%B0%80%20%EA%B5%90%EC%97%AD%EC%9D%84%20%EB%A7%8E%EC%9D%B4%20%ED%95%A0%EA%B9%8C.html">6 어떤 나라가 교역을 많이 할까</a></li>
<li class="toctree-l1"><a class="reference internal" href="17%20%EA%B4%80%EC%84%B8%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B8%B0%EC%B4%88%20%EB%B6%84%EC%84%9D.html">7 관세 데이터 기초 분석</a></li>
<li class="toctree-l1"><a class="reference internal" href="18%20%EA%B5%AD%EC%A0%9C%EB%AC%B4%EC%97%AD%20%EC%A4%91%EB%A0%A5%20%EB%AA%A8%ED%98%95%20%EC%B6%94%EC%A0%95.html">8 국제무역 중력 모형 추정</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">데이터 관리</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="21%20%EA%B5%AD%EC%A0%9C%EB%AC%B4%EC%97%AD%20%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98%20%ED%8A%B9%EC%A7%95.html">1 국제무역 데이터의 특징</a></li>
<li class="toctree-l1"><a class="reference internal" href="22%20UN%20Comtrade%20API%20%EC%B6%94%EC%B6%9C.html">2 UN Comtrade API 추출</a></li>
<li class="toctree-l1"><a class="reference internal" href="23%20%EC%84%B8%EA%B3%84%EC%9D%80%ED%96%89%20WITS%20API%20%EC%B6%94%EC%B6%9C.html">3 세계은행 WITS API 추출</a></li>
<li class="toctree-l1"><a class="reference internal" href="24%20WTO%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20API%20%EC%B6%94%EC%B6%9C.html">4 WTO 데이터 API 추출</a></li>
<li class="toctree-l1"><a class="reference internal" href="25%20%EA%B4%80%EC%84%B8%EC%B2%AD%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20API%20%EC%B6%94%EC%B6%9C.html">5 관세청 데이터 API 추출</a></li>
<li class="toctree-l1"><a class="reference internal" href="26%20%EA%B5%AD%EC%A0%9C%EB%AC%B4%EC%97%AD%20%EB%B9%85%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EA%B4%80%EB%A6%AC.html">6 국제무역 빅데이터 관리</a></li>
<li class="toctree-l1"><a class="reference internal" href="27%20%EC%84%B8%EA%B3%84%EC%9D%80%ED%96%89%20WBGAPI.html">7 세계은행 WBGAPI</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/pilsunchoi/book2" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/pilsunchoi/book2/issues/new?title=Issue%20on%20page%20%2Fnotebooks/14 자동차 수출입을 동시에 한다.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/14 자동차 수출입을 동시에 한다.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>4 자동차 수출입을 동시에 한다</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1. 산업내무역</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">정의</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">소득 수렴과 산업내무역</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">경제통합과 산업내무역</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2. 독일 사례 분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">독일 2004년 유사성 지수 계산</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs6">독일 2004년 HS6 무역 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overlap-trade">Overlap Trade 계산 및 유사성 지수와 병합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">그래프: Overlap Trade와 유사성 지수</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">3. 집계 수준별 산업내무역 지수</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">예시 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eu">EU 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs1">HS1 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">HS6 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs2">HS2 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gl">GL 지수 그래프 작성</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>4 자동차 수출입을 동시에 한다<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<p>출처: UNCTAD (2012), <a class="reference external" href="https://unctad.org/topic/trade-analysis/trade-policy-analysis"><em>A Practical Guide to Trade Policy Analysis</em></a>, <a class="reference external" href="https://unctad.org/system/files/official-document/gds2012d2_ch1_en.pdf">Chapter 1</a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#1.-%EC%82%B0%EC%97%85%EB%82%B4%EB%AC%B4%EC%97%AD"><span class="xref myst">1. 산업내무역</span></a></p></li>
<li><p><a class="reference internal" href="#2.-%EC%88%98%EC%B6%9C%EC%9D%98-%EB%8C%80%EC%83%81%EA%B5%AD%EB%B3%84-%EB%B9%84%EC%A4%91"><span class="xref myst">2. 수출의 대상국별 비중</span></a></p></li>
</ul>
<section id="id2">
<h2>1. 산업내무역<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<section id="id3">
<h3>정의<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p><strong>산업내무역</strong>(IIT: Intra-industry trade)이란 한 나라가 동일한 산업에서 비슷한 제품을 동시에 수출하고 수입하는 무역 형태를 의미한다. 예를 들어, 독일이 프랑스로 자동차를 수출하면서 동시에 프랑스로부터 자동차를 수입하는 경우가 이에 해당한다.</p>
<p>많은 나라에서, 높은 수준의 통계적 세분화가 이루어진 경우에도 동일한 산업 내에서 상당한 비중의 국제 무역이 발생한다. 산업내무역의 정도를 측정하는 대표적인 지표는 <strong>Grubel-Lloyd(GL) 지수</strong>다. 이 지수는 다음과 같이 정의된다.</p>
<div class="math notranslate nohighlight">
\[
GL^{ij}_k = 1 - \frac{|X^{ij}_k - M^{ij}_k|}{X^{ij}_k + M^{ij}_k}
\]</div>
<p>여기서, <span class="math notranslate nohighlight">\(X^{ij}_k\)</span>는 상품(또는 산업) <span class="math notranslate nohighlight">\(k\)</span>에서 <span class="math notranslate nohighlight">\(i\)</span>국이 <span class="math notranslate nohighlight">\(j\)</span>국으로 수출하는 금액이며, <span class="math notranslate nohighlight">\(M^{ij}_k\)</span>는 해당 상품의 수입 금액이다. GL 지수는 <span class="math notranslate nohighlight">\(0\)</span>에서 <span class="math notranslate nohighlight">\(1\)</span> 사이의 값을 갖는다. 특정 산업에서 한 나라가 오직 수출국이거나 수입국일 경우, 분자가 분모와 같아지므로 GL 지수는 <span class="math notranslate nohighlight">\(0\)</span>이 되어 산업내무역이 존재하지 않음을 의미한다. 반면, 동일한 산업에서 한 나라가 수출과 수입을 모두 수행하면, GL 지수는 0이 아니다. 산업내무역이 많을수록 GL 지수는 1에 가까워진다.</p>
</section>
<section id="id4">
<h3>소득 수렴과 산업내무역<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<p>유사한 경제 규모(즉, GDP가 비슷한 나라들)일수록 산업내무역의 비중이 더 높아지는 경향이 있다. 이를 확인하기 위해 아래에서는 실제 데이터를 사용해 2004년 독일과 그 무역 상대국들 간의 <strong>무역중복 비중</strong>(share of overlap trade)과 <strong>유사성 지수</strong>(similarity index) 간의 관계를 산점도로 그린다. Helpman (1987)에 따라 유사성 지수는 다음과 같이 정의된다.</p>
<div class="math notranslate nohighlight">
\[
SI^{ij} = 1 - \left[ \frac{GDP^i}{GDP^i + GDP^j} \right]^2- \left[ \frac{GDP^j}{GDP^i + GDP^j} \right]^2
\]</div>
<p>여기서, GDP는 실질값(real terms)이다.</p>
<p>한편, 무역중복 비중은 양방향 무역(즉, GL 지수 <span class="math notranslate nohighlight">\(&gt;\)</span> 0)을 보이는 제품(HS 6자리 기준)의 수출입 합계를 전체 수출입 합계로 나눈 값으로 정의된다. 결국, 무역중복 비중은 산업내무역의 정도를 나라 전체적으로 평가한 것이다.</p>
<p>아래 결과에서 볼 수 있듯이, 독일과 1인당 GDP 수준이 유사한 국가일수록 무역중복 비중이 더 높다.</p>
<p>소득 수렴이 산업내무역을 촉진하는 이유 중 하나는 저소득 국가들이 고소득 국가를 따라잡으면서 동일한 유형의 제품을 생산하게 되기 때문이다. 기술 수준이 향상되면서, 차별화된 유사 상품의 교역(수평적 무역)이 증가하는데, 이는 독점적 경쟁 모델(monopolistic competition model) 과 일치하는 무역 구조를 형성한다. Krugman의 독점적 경쟁 모델(Monopolistic Competition Model)에서는 기업들이 차별화된 제품을 생산하며, 국가 간 무역이 서로 다른 품질이나 디자인의 유사한 제품(예: 독일과 일본이 자동차를 서로 교역) 간에 이루어질 수 있음을 설명한다.</p>
</section>
<section id="id5">
<h3>경제통합과 산업내무역<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>산업내무역 지수가 상승하는 또 다른 이유는 경제 통합이 진행되면서 수직적 무역(vertical trade)이 증가하기 때문이다. 예를 들어, 독일이 체코 공화국에 자동차 부품(엔진, 변속기, 브레이크 모듈 등)을 수출하고, 체코가 이를 조립하여 다시 독일로 완성차를 수출하는 경우를 생각해보자. 만약 GL 지수를 자동차 산업 전체(HS 2자리 수준)에서 계산하면, 독일과 체코 간의 자동차 부문 산업내무역이 상당히 높은 것으로 나타날 것이다. 그러나 이는 사실상 헥셔-올린(Heckscher-Ohlin) 무역, 즉 체코의 낮은 노동 비용(조립 공정은 부품 제조보다 노동집약적이므로, 비교우위에 따라 체코에서 조립하는 것이 더 효율적임)에 의해 발생하는 현상으로서 소득 수렴이나 독점적 경쟁과 직접적인 관련이 없다.</p>
<p>한편, GL 지수는 해석에 주의가 필요한데, 집계 수준이 높아질수록 GL 지수가 상승하는 경향이 있다. 이는 데이터가 세분화될수록 GL 지수는 낮아지는 것을 의미한다. 따라서 GL 지수를 비교할 때는 유사한 수준의 집계를 사용해야 한다.</p>
</section>
</section>
<section id="id6">
<h2>2. 독일 사례 분석<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>독일 2004년 유사성 지수 계산<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># UNCTAD (2012) 원래 데이터세트가 용량이 너무 큼
# GravityData.dta 파일 불러오기
gravity = pd.read_stata(&quot;../Data/GravityData.dta&quot;)

# 필요한 변수만 유지
gravity = gravity[[&#39;ccode&#39;, &#39;pcode&#39;, &#39;year&#39;, &#39;cgdp_c2000&#39;, &#39;pgdp_c2000&#39;]]
gravity = gravity.drop_duplicates()

# CSV 파일로 저장
gravity.to_csv(&quot;../Data/GravityData1.csv&quot;)
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># GravityData.csv 파일 불러오기</span>
<span class="n">gravity</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../Data/GravityData1.csv&quot;</span><span class="p">)</span>
<span class="n">gravity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>ccode</th>
      <th>pcode</th>
      <th>year</th>
      <th>cgdp_c2000</th>
      <th>pgdp_c2000</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>AGO</td>
      <td>ARG</td>
      <td>1985</td>
      <td>7.220000e+09</td>
      <td>1.870000e+11</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>AGO</td>
      <td>AUS</td>
      <td>1985</td>
      <td>7.220000e+09</td>
      <td>2.360000e+11</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>AGO</td>
      <td>AUT</td>
      <td>1985</td>
      <td>7.220000e+09</td>
      <td>1.280000e+11</td>
    </tr>
    <tr>
      <th>3</th>
      <td>25</td>
      <td>AGO</td>
      <td>BDI</td>
      <td>1985</td>
      <td>7.220000e+09</td>
      <td>6.730000e+08</td>
    </tr>
    <tr>
      <th>4</th>
      <td>26</td>
      <td>AGO</td>
      <td>BEN</td>
      <td>1978</td>
      <td>NaN</td>
      <td>9.540000e+08</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>259914</th>
      <td>3950210</td>
      <td>ZWE</td>
      <td>ZMB</td>
      <td>1999</td>
      <td>7.570000e+09</td>
      <td>3.130000e+09</td>
    </tr>
    <tr>
      <th>259915</th>
      <td>3950211</td>
      <td>ZWE</td>
      <td>ZMB</td>
      <td>2000</td>
      <td>7.200000e+09</td>
      <td>3.240000e+09</td>
    </tr>
    <tr>
      <th>259916</th>
      <td>3950212</td>
      <td>ZWE</td>
      <td>ZMB</td>
      <td>2001</td>
      <td>6.600000e+09</td>
      <td>3.400000e+09</td>
    </tr>
    <tr>
      <th>259917</th>
      <td>3950213</td>
      <td>ZWE</td>
      <td>ZMB</td>
      <td>2002</td>
      <td>6.230000e+09</td>
      <td>3.510000e+09</td>
    </tr>
    <tr>
      <th>259918</th>
      <td>3950214</td>
      <td>ZWE</td>
      <td>ZMB</td>
      <td>2004</td>
      <td>NaN</td>
      <td>3.860000e+09</td>
    </tr>
  </tbody>
</table>
<p>259919 rows × 6 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># temp1, temp2 계산 및 유사성 지수(simil_index) 생성</span>
<span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;temp1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;cgdp_c2000&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;cgdp_c2000&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;pgdp_c2000&#39;</span><span class="p">])</span>
<span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;temp2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;pgdp_c2000&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;cgdp_c2000&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;pgdp_c2000&#39;</span><span class="p">])</span>
<span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;temp1&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">gravity</span><span class="p">[</span><span class="s1">&#39;temp2&#39;</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span>

<span class="c1"># 필요한 변수만 유지하고, 2004년 및 ccode가 &quot;DEU&quot;인 행만 선택</span>
<span class="n">sim_index</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">[[</span><span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;pcode&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;simil_index&#39;</span><span class="p">]]</span>
<span class="n">sim_index</span> <span class="o">=</span> <span class="n">sim_index</span><span class="p">[(</span><span class="n">sim_index</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2004</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">sim_index</span><span class="p">[</span><span class="s1">&#39;ccode&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;DEU&quot;</span><span class="p">)]</span>
<span class="n">sim_index</span> <span class="o">=</span> <span class="n">sim_index</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;pcode&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">])</span>

<span class="c1"># 데이터 확인</span>
<span class="n">sim_index</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ccode</th>
      <th>pcode</th>
      <th>year</th>
      <th>simil_index</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>54195</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>54222</th>
      <td>DEU</td>
      <td>AFG</td>
      <td>2004</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>54249</th>
      <td>DEU</td>
      <td>AGO</td>
      <td>2004</td>
      <td>0.012751</td>
    </tr>
    <tr>
      <th>54276</th>
      <td>DEU</td>
      <td>ALB</td>
      <td>2004</td>
      <td>0.004862</td>
    </tr>
    <tr>
      <th>54303</th>
      <td>DEU</td>
      <td>ARG</td>
      <td>2004</td>
      <td>0.226260</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>58325</th>
      <td>DEU</td>
      <td>YEM</td>
      <td>2004</td>
      <td>0.011226</td>
    </tr>
    <tr>
      <th>58366</th>
      <td>DEU</td>
      <td>ZAF</td>
      <td>2004</td>
      <td>0.135191</td>
    </tr>
    <tr>
      <th>58393</th>
      <td>DEU</td>
      <td>ZAR</td>
      <td>2004</td>
      <td>0.005078</td>
    </tr>
    <tr>
      <th>58420</th>
      <td>DEU</td>
      <td>ZMB</td>
      <td>2004</td>
      <td>0.004005</td>
    </tr>
    <tr>
      <th>58445</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>173 rows × 4 columns</p>
</div></div></div>
</div>
</section>
<section id="hs6">
<h3>독일 2004년 HS6 무역 데이터<a class="headerlink" href="#hs6" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># germany_trade_2004_hs6.dta 파일 불러오기</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;../Data/germany_trade_2004_hs6.dta&quot;</span><span class="p">)</span>
<span class="n">germany_trade</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>nomen</th>
      <th>reporter</th>
      <th>reporter_name</th>
      <th>partner</th>
      <th>partner_name</th>
      <th>year</th>
      <th>product</th>
      <th>product_name</th>
      <th>flow_name</th>
      <th>trade_value</th>
      <th>rownum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H0</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ABW</td>
      <td>Aruba</td>
      <td>2004</td>
      <td>Total</td>
      <td>Total Trade</td>
      <td>Gross Exp.</td>
      <td>4674</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ABW</td>
      <td>Aruba</td>
      <td>2004</td>
      <td>Total</td>
      <td>Total Trade</td>
      <td>Gross Imp.</td>
      <td>5536</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ABW</td>
      <td>Aruba</td>
      <td>2004</td>
      <td>02</td>
      <td>Meat and edible meat offal</td>
      <td>Gross Exp.</td>
      <td>9</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ABW</td>
      <td>Aruba</td>
      <td>2004</td>
      <td>0206</td>
      <td>Edible offal of bovine animals...,</td>
      <td>Gross Exp.</td>
      <td>9</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ABW</td>
      <td>Aruba</td>
      <td>2004</td>
      <td>020649</td>
      <td>Frozen edible swine offal (excl. li</td>
      <td>Gross Exp.</td>
      <td>9</td>
      <td>5</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>874970</th>
      <td>S1</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ZWE</td>
      <td>Zimbabwe</td>
      <td>2004</td>
      <td>9</td>
      <td>Commod. &amp; transacts. not class. acc</td>
      <td>Gross Exp.</td>
      <td>779</td>
      <td>874971</td>
    </tr>
    <tr>
      <th>874971</th>
      <td>S1</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ZWE</td>
      <td>Zimbabwe</td>
      <td>2004</td>
      <td>9</td>
      <td>Commod. &amp; transacts. not class. acc</td>
      <td>Gross Imp.</td>
      <td>102</td>
      <td>874972</td>
    </tr>
    <tr>
      <th>874972</th>
      <td>S1</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ZWE</td>
      <td>Zimbabwe</td>
      <td>2004</td>
      <td>94</td>
      <td>Animals, nes, incl. zoo animals, do</td>
      <td>Gross Imp.</td>
      <td>102</td>
      <td>874973</td>
    </tr>
    <tr>
      <th>874973</th>
      <td>S1</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ZWE</td>
      <td>Zimbabwe</td>
      <td>2004</td>
      <td>941</td>
      <td>Animals, nes-incl.zoo animals,dogs</td>
      <td>Gross Imp.</td>
      <td>102</td>
      <td>874974</td>
    </tr>
    <tr>
      <th>874974</th>
      <td>S1</td>
      <td>DEU</td>
      <td>Germany</td>
      <td>ZWE</td>
      <td>Zimbabwe</td>
      <td>2004</td>
      <td>9410</td>
      <td>Animals,n.e.s.</td>
      <td>Gross Imp.</td>
      <td>102</td>
      <td>874975</td>
    </tr>
  </tbody>
</table>
<p>874975 rows × 11 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 변수명 변경: reporter -&gt; ccode, partner -&gt; pcode</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;reporter&#39;</span><span class="p">:</span> <span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;partner&#39;</span><span class="p">:</span> <span class="s1">&#39;pcode&#39;</span><span class="p">})</span>

<span class="c1"># &#39;nomen&#39; 변수 삭제 (존재하지 않으면 무시)</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;nomen&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># flow_name 수정: &quot;Gross Exp.&quot; → &quot;Exports&quot;, &quot;Gross Imp.&quot; → &quot;Imports&quot;</span>
<span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;flow_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;flow_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s2">&quot;Gross Exp.&quot;</span><span class="p">:</span> <span class="s2">&quot;Exports&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Gross Imp.&quot;</span><span class="p">:</span> <span class="s2">&quot;Imports&quot;</span>
<span class="p">})</span>

<span class="c1"># product 변수의 공백 제거 후 재명명</span>
<span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">])</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;product&#39;</span><span class="p">})</span>

<span class="c1"># product가 &quot;Total&quot; 인 행 삭제 및 product 길이가 6 이상인 행만 유지</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="p">[</span><span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;Total&quot;</span><span class="p">]</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="p">[</span><span class="n">germany_trade</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">]</span>

<span class="c1"># &#39;rownum&#39; 변수 삭제 (존재하지 않으면 무시)</span>
<span class="n">germany_trade</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rownum&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># 데이터를 wide 형태로 피벗: index = (ccode, pcode, year, product), columns = flow_name, values = trade_value</span>
<span class="n">overlap_temp</span> <span class="o">=</span> <span class="n">germany_trade</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;pcode&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">],</span>
                                           <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;flow_name&#39;</span><span class="p">,</span>
                                           <span class="n">values</span><span class="o">=</span><span class="s1">&#39;trade_value&#39;</span><span class="p">,</span>
                                           <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;first&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="c1"># 데이터 확인</span>
<span class="n">overlap_temp</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>flow_name</th>
      <th>ccode</th>
      <th>pcode</th>
      <th>year</th>
      <th>product</th>
      <th>Exports</th>
      <th>Imports</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>020649</td>
      <td>9.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>040110</td>
      <td>20.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>040120</td>
      <td>213.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>110710</td>
      <td>9.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>121020</td>
      <td>7.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>321069</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>960899</td>
      <td>1.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>321070</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>961210</td>
      <td>8.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>321071</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>970110</td>
      <td>5.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>321072</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>970300</td>
      <td>NaN</td>
      <td>139.0</td>
    </tr>
    <tr>
      <th>321073</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>970400</td>
      <td>NaN</td>
      <td>7.0</td>
    </tr>
  </tbody>
</table>
<p>321074 rows × 6 columns</p>
</div></div></div>
</div>
</section>
<section id="overlap-trade">
<h3>Overlap Trade 계산 및 유사성 지수와 병합<a class="headerlink" href="#overlap-trade" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 각 (pcode, product) 단위에서 Grubel–Lloyd 지수 계산</span>
<span class="c1"># GL = 1 - (|Exports - Imports| / (Exports + Imports))</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;gl_i_j_k&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;Exports&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;Imports&#39;</span><span class="p">])</span> <span class="o">/</span>
                                <span class="p">(</span><span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;Exports&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;Imports&#39;</span><span class="p">]))</span>

<span class="c1"># 결측치(NaN)가 발생하면 0으로 대체</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;gl_i_j_k&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;gl_i_j_k&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># pcode별로 총 Exports, 총 Imports 합계 계산</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;Exports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;Imports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;denom&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x1&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x2&#39;</span><span class="p">]</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;dd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;denom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>

<span class="c1"># pcode별, gl_i_j_k &gt; 0 인 경우에 한해 Exports, Imports 합계 계산</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x11&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;Exports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;gl_i_j_k&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x22&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;Imports&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;gl_i_j_k&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;numer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x11&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;x22&#39;</span><span class="p">]</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;nn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;pcode&#39;</span><span class="p">)[</span><span class="s1">&#39;numer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span>

<span class="c1"># Overlap Trade 지수 계산: overlap = nn / dd</span>
<span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;nn&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">overlap_temp</span><span class="p">[</span><span class="s1">&#39;dd&#39;</span><span class="p">]</span>

<span class="c1"># 최종적으로 ccode, pcode, year, overlap만 남기기</span>
<span class="n">overlap_final</span> <span class="o">=</span> <span class="n">overlap_temp</span><span class="p">[[</span><span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;pcode&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;overlap&#39;</span><span class="p">]]</span>

<span class="c1"># ccode, pcode, year 기준으로 유사성 지수와 outer merge</span>
<span class="n">overlap_merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">overlap_final</span><span class="p">,</span> <span class="n">sim_index</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ccode&#39;</span><span class="p">,</span> <span class="s1">&#39;pcode&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 중복 행 제거</span>
<span class="n">overlap_merged</span> <span class="o">=</span> <span class="n">overlap_merged</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>

<span class="c1"># 데이터 확인</span>
<span class="n">overlap_merged</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ccode</th>
      <th>pcode</th>
      <th>year</th>
      <th>overlap</th>
      <th>simil_index</th>
      <th>_merge</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>DEU</td>
      <td>ABW</td>
      <td>2004</td>
      <td>0.021219</td>
      <td>NaN</td>
      <td>both</td>
    </tr>
    <tr>
      <th>340</th>
      <td>DEU</td>
      <td>AFG</td>
      <td>2004</td>
      <td>0.099273</td>
      <td>NaN</td>
      <td>both</td>
    </tr>
    <tr>
      <th>1186</th>
      <td>DEU</td>
      <td>AGO</td>
      <td>2004</td>
      <td>0.159785</td>
      <td>0.012751</td>
      <td>both</td>
    </tr>
    <tr>
      <th>1844</th>
      <td>DEU</td>
      <td>AIA</td>
      <td>2004</td>
      <td>0.036243</td>
      <td>NaN</td>
      <td>left_only</td>
    </tr>
    <tr>
      <th>2094</th>
      <td>DEU</td>
      <td>ALB</td>
      <td>2004</td>
      <td>0.321109</td>
      <td>0.004862</td>
      <td>both</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>314956</th>
      <td>DEU</td>
      <td>YEM</td>
      <td>2004</td>
      <td>0.215132</td>
      <td>0.011226</td>
      <td>both</td>
    </tr>
    <tr>
      <th>315921</th>
      <td>DEU</td>
      <td>ZAF</td>
      <td>2004</td>
      <td>0.737773</td>
      <td>0.135191</td>
      <td>both</td>
    </tr>
    <tr>
      <th>319191</th>
      <td>DEU</td>
      <td>ZAR</td>
      <td>2004</td>
      <td>0.027718</td>
      <td>0.005078</td>
      <td>both</td>
    </tr>
    <tr>
      <th>319982</th>
      <td>DEU</td>
      <td>ZMB</td>
      <td>2004</td>
      <td>0.027383</td>
      <td>0.004005</td>
      <td>both</td>
    </tr>
    <tr>
      <th>320401</th>
      <td>DEU</td>
      <td>ZWE</td>
      <td>2004</td>
      <td>0.072978</td>
      <td>NaN</td>
      <td>both</td>
    </tr>
  </tbody>
</table>
<p>230 rows × 6 columns</p>
</div></div></div>
</div>
</section>
<section id="id8">
<h3>그래프: Overlap Trade와 유사성 지수<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 분석을 위해 필요한 데이터만 (simil_index와 overlap 값이 존재하는) 선택</span>
<span class="n">plot_data</span> <span class="o">=</span> <span class="n">overlap_merged</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">,</span> <span class="s1">&#39;overlap&#39;</span><span class="p">])</span>

<span class="c1"># 산점도와 선형 회귀선 (linear fit) 그리기</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">],</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>

<span class="c1"># 각 데이터 포인트에 pcode 레이블 표시</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mf">0.006</span>  <span class="c1"># 필요에 따라 조정</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;pcode&#39;</span><span class="p">]),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>

<span class="c1"># 선형 회귀선 계산 및 플롯</span>
<span class="n">coeffs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">],</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">coeffs</span><span class="p">,</span> <span class="n">x_fit</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Linear fit&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Similarity index&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Share of overlap trade&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Overlap trade and country-similarity index vis-à-vis Germany, 2004&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3779dd5ad1b51b3efbc25d0baa79ff665e4d31fd20c0b8fcaedb96087d5959f7.png" src="../_images/3779dd5ad1b51b3efbc25d0baa79ff665e4d31fd20c0b8fcaedb96087d5959f7.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2차식(quadratic fit) 회귀선을 그린 그래프</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">],</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>

<span class="c1"># 각 데이터 포인트에 pcode 레이블 표시</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mf">0.006</span>  <span class="c1"># 필요에 따라 조정</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">plot_data</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;pcode&#39;</span><span class="p">]),</span> 
             <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>

<span class="n">quad_coeffs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;simil_index&#39;</span><span class="p">],</span> <span class="n">plot_data</span><span class="p">[</span><span class="s1">&#39;overlap&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">y_quad</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">(</span><span class="n">quad_coeffs</span><span class="p">,</span> <span class="n">x_fit</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="n">y_quad</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Quadratic fit&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Similarity index&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Share of overlap trade&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Overlap trade and country-similarity index vis-à-vis Germany, 2004&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/2b4c8270daa466f0398c20d36d796cc989120a50987b152e55e7aeb8eae2d35f.png" src="../_images/2b4c8270daa466f0398c20d36d796cc989120a50987b152e55e7aeb8eae2d35f.png" />
</div>
</div>
</section>
</section>
<section id="id9">
<h2>3. 집계 수준별 산업내무역 지수<a class="headerlink" href="#id9" title="Link to this heading">#</a></h2>
<p>Grubel-Lloyd(GL) 지수는 산업내무역의 정도를 측정하는 유용한 지표지만, 이 지수는 집계 수준에 따라 민감하게 변동하는 문제가 있다. 아래에서는 유럽연합(EU) 국가들의 GL 지수를 세 가지 다른 집계 수준에서 계산한다.(모든 목적지로부터의 수출 및 수입 데이터를 사용함.)</p>
<p>계산 결과를 보면, 더 높은 수준에서 집계할수록 GL 지수가 더 높아지는 경향을 보인다.</p>
<section id="id10">
<h3>예시 데이터<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>GL 지수가 집계 수준이 높아질수록 기계적으로 증가하는 이유를 이해하기 위해, 아래 예시 데이터를 생각해보자. 이 표는 독일이 체코에 자동차 엔진과 기어박스를 수출하고, 체코에서 이를 조립하여 자동차를 다시 독일로 수출하는 상황을 나타낸다.</p>
<p>소호(subheading) 수준(표의 첫 두 행)에서는 “자동차 부품(Car parts)”과 “조립된 자동차(Assembled cars)”가 서로 다른 상품이므로, 산업내무역은 0이다(마지막 열). 반면, 류(chapter) 수준에서는 “자동차 부품”과 “조립된 자동차” 모두 HS 코드 87에 속하므로 산업내무역이 0.75의 아주 높은 양(+)의 값을 가지게 된다.</p>
<p>일반적으로, 집계 수준이 낮을수록 산업내무역의 측정값이 낮게 나타난다. 이러한 값들은 실제 산업내무역 수준에 더 가까우며, 반면 높은 집계 수준에서의 높은 값들은 통계적 착시(statistical illusion)에 불과할 수 있다.</p>
<center> <b>Grubel-Lloyd 지수: 예시 계산</b> </center>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>항목</p></th>
<th class="head"><p>수출(X)</p></th>
<th class="head"><p>수입(M)</p></th>
<th class="head"><p>abs(X - M)</p></th>
<th class="head"><p>X + M</p></th>
<th class="head"><p>GL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>자동차 부품</p></td>
<td><p></p></td>
<td><p>600</p></td>
<td><p>600</p></td>
<td><p>600</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>조립된 자동차</p></td>
<td><p></p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>류(chapter) 87</p></td>
<td><p>1000</p></td>
<td><p>600</p></td>
<td><p>400</p></td>
<td><p>1600</p></td>
<td><p>0.75</p></td>
</tr>
</tbody>
</table>
</section>
<section id="eu">
<h3>EU 데이터<a class="headerlink" href="#eu" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>유럽연합 전체의 GL 지수를 산업 또는 제품 수준의 무역 비중을 가중치로 하여 집계하는 방식으로 계산한다. 이는 총수출 및 총수입을 사용하는 방식보다 바람직하다.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># 데이터 불러오기: trade_6digit.dta</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;../Data/trade_6digit.dta&quot;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>product</th>
      <th>exp_eu</th>
      <th>exp_wl</th>
      <th>imp_eu</th>
      <th>imp_wl</th>
      <th>ce</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1994</td>
      <td>10111</td>
      <td>511536.0</td>
      <td>634545.0</td>
      <td>614444.0</td>
      <td>834992.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1994</td>
      <td>10119</td>
      <td>1196798.0</td>
      <td>1319424.0</td>
      <td>29344.0</td>
      <td>53345.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1994</td>
      <td>10120</td>
      <td>626.0</td>
      <td>3688.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1994</td>
      <td>10210</td>
      <td>26890988.0</td>
      <td>27184104.0</td>
      <td>11267391.0</td>
      <td>11899005.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1994</td>
      <td>10290</td>
      <td>10615080.0</td>
      <td>17989604.0</td>
      <td>NaN</td>
      <td>5420297.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>276973</th>
      <td>2003</td>
      <td>970200</td>
      <td>NaN</td>
      <td>5328.0</td>
      <td>35299.0</td>
      <td>57861.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>276974</th>
      <td>2003</td>
      <td>970300</td>
      <td>NaN</td>
      <td>603.0</td>
      <td>8828.0</td>
      <td>21932.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>276975</th>
      <td>2003</td>
      <td>970400</td>
      <td>110704.0</td>
      <td>153890.0</td>
      <td>17090.0</td>
      <td>73842.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>276976</th>
      <td>2003</td>
      <td>970500</td>
      <td>NaN</td>
      <td>4674.0</td>
      <td>NaN</td>
      <td>55986.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>276977</th>
      <td>2003</td>
      <td>970600</td>
      <td>9880.0</td>
      <td>9880.0</td>
      <td>35726.0</td>
      <td>36939.0</td>
      <td>6.0</td>
    </tr>
  </tbody>
</table>
<p>276978 rows × 7 columns</p>
</div></div></div>
</div>
<p><strong>변수 설명</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">year</span></code>: 연도</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">product</span></code>: 제품 코드(HS)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exp_eu</span></code>: 유럽(EU)으로의 수출액</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exp_wl</span></code>: 세계(World)로의 수출액</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">imp_eu</span></code>: 유럽(EU)으로부터의 수입액</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">imp_wl</span></code>: 세계(World)로부터의 수입액</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ce</span></code>: 특정 조건을 나타내는 변수 (1.0은 특정 조건 충족 여부를 의미할 가능성이 있음)</p></li>
</ul>
</section>
<section id="hs1">
<h3>HS1 수준 집계<a class="headerlink" href="#hs1" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 변수 &#39;product&#39;를 &#39;hs6&#39;로 변경</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="s2">&quot;hs6&quot;</span><span class="p">})</span>

<span class="c1"># hs6 값을 기준으로 &#39;section&#39; 변수 생성</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">60000</span><span class="p">,</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">60000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">150000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">150000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">160000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">160000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">250000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">250000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">280000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">280000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">390000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">390000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">410000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">410000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">440000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">440000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">470000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">470000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">500000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">500000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">640000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">640000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">680000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">680000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">710000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">710000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">720000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">720000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">840000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">840000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">860000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">860000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">900000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">900000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">930000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">930000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">940000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">940000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">970000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">970000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">980000</span><span class="p">),</span>
    <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hs6&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">980000</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">22</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;section&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span> <span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># 연도와 section별로 수출 및 수입 금액 합계 집계</span>
<span class="n">df_sector</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;section&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>\
                    <span class="p">[[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;exp_wl&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_wl&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df_sector</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>section</th>
      <th>exp_eu</th>
      <th>exp_wl</th>
      <th>imp_eu</th>
      <th>imp_wl</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1994</td>
      <td>1</td>
      <td>1.322055e+09</td>
      <td>2.058855e+09</td>
      <td>6.486129e+08</td>
      <td>1.154001e+09</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1994</td>
      <td>2</td>
      <td>9.500778e+08</td>
      <td>1.629440e+09</td>
      <td>8.465851e+08</td>
      <td>2.135366e+09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1994</td>
      <td>3</td>
      <td>4.727788e+07</td>
      <td>2.211453e+08</td>
      <td>2.317530e+08</td>
      <td>3.649722e+08</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1994</td>
      <td>4</td>
      <td>7.571672e+08</td>
      <td>2.586353e+09</td>
      <td>1.596599e+09</td>
      <td>3.100346e+09</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1994</td>
      <td>5</td>
      <td>2.510219e+09</td>
      <td>4.543348e+09</td>
      <td>1.353761e+09</td>
      <td>1.019264e+10</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>205</th>
      <td>2003</td>
      <td>17</td>
      <td>2.156628e+10</td>
      <td>2.903545e+10</td>
      <td>1.808135e+10</td>
      <td>2.473098e+10</td>
    </tr>
    <tr>
      <th>206</th>
      <td>2003</td>
      <td>18</td>
      <td>2.037365e+09</td>
      <td>2.851254e+09</td>
      <td>3.068689e+09</td>
      <td>5.123016e+09</td>
    </tr>
    <tr>
      <th>207</th>
      <td>2003</td>
      <td>19</td>
      <td>2.580094e+07</td>
      <td>8.836896e+07</td>
      <td>4.645092e+07</td>
      <td>8.103078e+07</td>
    </tr>
    <tr>
      <th>208</th>
      <td>2003</td>
      <td>20</td>
      <td>8.358265e+09</td>
      <td>1.073537e+10</td>
      <td>2.579269e+09</td>
      <td>4.472797e+09</td>
    </tr>
    <tr>
      <th>209</th>
      <td>2003</td>
      <td>21</td>
      <td>1.396499e+07</td>
      <td>3.580712e+07</td>
      <td>7.220165e+07</td>
      <td>9.039225e+07</td>
    </tr>
  </tbody>
</table>
<p>210 rows × 6 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Grubel–Lloyd 지수 계산: </span>
<span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">]))</span>
<span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;gl_wl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_sector</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">]))</span>

<span class="c1"># 연도별로 exp_eu 가중평균을 이용해 gl_eu 계산</span>
<span class="n">df_gl_section</span> <span class="o">=</span> <span class="n">df_sector</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;gl_eu_section&#39;</span><span class="p">)</span>
<span class="n">df_gl_section</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>gl_eu_section</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1994</td>
      <td>0.690926</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1995</td>
      <td>0.724051</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1996</td>
      <td>0.736687</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1997</td>
      <td>0.772390</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1998</td>
      <td>0.813877</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1999</td>
      <td>0.820110</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2000</td>
      <td>0.839653</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2001</td>
      <td>0.849829</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2002</td>
      <td>0.844976</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2003</td>
      <td>0.834292</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id11">
<h3>HS6 수준 집계<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 데이터 다시 불러오기</span>
<span class="n">df_hs6</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;../Data/trade_6digit.dta&quot;</span><span class="p">)</span>

<span class="c1"># 연도와 product 수준에서 합계 집계</span>
<span class="n">df_hs6</span> <span class="o">=</span> <span class="n">df_hs6</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;product&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>\
                    <span class="p">[[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;exp_wl&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_wl&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># GL 지수 계산</span>
<span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">]))</span>
<span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;gl_wl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_hs6</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">]))</span>

<span class="c1"># 연도별 exp_eu 가중평균으로 gl_eu 계산</span>
<span class="n">df_gl_hs6</span> <span class="o">=</span> <span class="n">df_hs6</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span>
        <span class="n">g</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span>
        <span class="n">weights</span><span class="o">=</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">][</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
    <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;gl_eu_hs6&#39;</span><span class="p">)</span>
<span class="n">df_gl_hs6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>gl_eu_hs6</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1994</td>
      <td>0.368801</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1995</td>
      <td>0.421852</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1996</td>
      <td>0.442684</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1997</td>
      <td>0.456525</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1998</td>
      <td>0.489915</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1999</td>
      <td>0.493899</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2000</td>
      <td>0.492769</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2001</td>
      <td>0.508242</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2002</td>
      <td>0.508331</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2003</td>
      <td>0.510380</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="hs2">
<h3>HS2 수준 집계<a class="headerlink" href="#hs2" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 데이터 다시 불러오기</span>
<span class="n">df_hs2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s2">&quot;../Data/trade_6digit.dta&quot;</span><span class="p">)</span>

<span class="c1"># a = int(product/10000) 계산</span>
<span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10000</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="c1"># product 변수 삭제</span>
<span class="n">df_hs2</span> <span class="o">=</span> <span class="n">df_hs2</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;product&#39;</span><span class="p">])</span>
<span class="c1"># 연도와 a(HS2 digit)별로 합계 집계</span>
<span class="n">df_hs2</span> <span class="o">=</span> <span class="n">df_hs2</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>\
                    <span class="p">[[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;exp_wl&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_eu&#39;</span><span class="p">,</span> <span class="s1">&#39;imp_wl&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># GL 지수 계산</span>
<span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;imp_eu&#39;</span><span class="p">]))</span>
<span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;gl_wl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;exp_wl&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df_hs2</span><span class="p">[</span><span class="s1">&#39;imp_wl&#39;</span><span class="p">]))</span>

<span class="c1"># 연도별 exp_eu 가중평균으로 gl_eu 계산</span>
<span class="n">df_gl_chapter</span> <span class="o">=</span> <span class="n">df_hs2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">g</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;gl_eu&#39;</span><span class="p">],</span> <span class="n">weights</span><span class="o">=</span><span class="n">g</span><span class="p">[</span><span class="s1">&#39;exp_eu&#39;</span><span class="p">]))</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;gl_eu_chapter&#39;</span><span class="p">)</span>
<span class="n">df_gl_chapter</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>gl_eu_chapter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1994</td>
      <td>0.566985</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1995</td>
      <td>0.611008</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1996</td>
      <td>0.622856</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1997</td>
      <td>0.678234</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1998</td>
      <td>0.722344</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1999</td>
      <td>0.736181</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2000</td>
      <td>0.765399</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2001</td>
      <td>0.757010</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2002</td>
      <td>0.756582</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2003</td>
      <td>0.763069</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="gl">
<h3>GL 지수 그래프 작성<a class="headerlink" href="#gl" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 세 GL 지수 파일(Section, HS6, Chapter)을 &#39;year&#39; 기준으로 병합</span>
<span class="n">df_gl</span> <span class="o">=</span> <span class="n">df_gl_chapter</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_gl_hs6</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>\
                     <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_gl_section</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>

<span class="c1"># GL 지수를 연도별로 선 그래프로 출력</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;gl_eu_section&#39;</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;GL index, Section&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;gl_eu_chapter&#39;</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;GL index, Chapter&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">df_gl</span><span class="p">[</span><span class="s1">&#39;gl_eu_hs6&#39;</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;^&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;GL index, HS6&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Grubel–Lloyd Index Over Time&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/519e907a36d5317a0fa68aa6697f7bc650cf510331bae6f8a74c605f81f2a135.png" src="../_images/519e907a36d5317a0fa68aa6697f7bc650cf510331bae6f8a74c605f81f2a135.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="13%20%EC%88%98%EC%B6%9C%20%EB%8B%A4%EA%B0%81%ED%99%94%EB%A5%BC%20%EC%B8%A1%EC%A0%95%ED%95%B4%EB%B3%B4%EC%9E%90.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">3 수출 다각화를 측정해보자</p>
      </div>
    </a>
    <a class="right-next"
       href="15%20%EC%88%98%EC%B6%9C%20%EC%84%B1%EC%9E%A5%20%EB%B6%84%ED%95%B4%ED%95%98%EA%B8%B0.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">5 수출 성장 분해하기</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1. 산업내무역</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">정의</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">소득 수렴과 산업내무역</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">경제통합과 산업내무역</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2. 독일 사례 분석</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">독일 2004년 유사성 지수 계산</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs6">독일 2004년 HS6 무역 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overlap-trade">Overlap Trade 계산 및 유사성 지수와 병합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">그래프: Overlap Trade와 유사성 지수</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">3. 집계 수준별 산업내무역 지수</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">예시 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eu">EU 데이터</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs1">HS1 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">HS6 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hs2">HS2 수준 집계</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gl">GL 지수 그래프 작성</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 최필선 민인식
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>